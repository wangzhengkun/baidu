<html>
  <head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 07</title>
  </head>
<body>
<div class="box">
    A
    <div class="item1">
        B
        <div class="item2">
            D
            <div class="item3">
                H
            </div>
            <div class="item3">
                I
            </div>      
        </div>
        <div class="item2">
            E
            <div class="item3">
                J
            </div> 
            <div class="item3">
                K
            </div> 
        </div>    
    </div>
    <div class="item1">
        C        
        <div class="item2">
            F
            <div class="item3">
                L
            </div>
            <div class="item3">
                M
            </div>    
        </div>
        <div class="item2">
            G
            <div class="item3">
                N
            </div>
            <div class="item3">
                O
            </div>   
        </div>    
    </div>  
</div> 
<button onclick="preTra()">前序遍历</button>
<button onclick="inTra()">中序遍历</button> 
<button onclick="postTra()">后序遍历</button>        
<style type="text/css">
    
    div {
        border:1px solid #000;
        display : flex;
        justify-content : center; 
        margin:10px 10px;
        background-color:#ffffff;                
    }
    .box {
        width:600px;
        height:200px;
    }
    .item1{
        width:250px;
        height:160px;
    }
    .item2{
        width:100px;
        height:120px;
    }

    .item3{
        width:40px;
        height:80px;
    }
</style> 
<script type="text/javascript">
    //遍历的nodelist
    var lis = document.querySelectorAll('.box')
    //改变颜色用的nodelist
    var lis2 = document.querySelectorAll('div') 
    //存储遍历结果   
    var state = []
    //已改变的Node
    var changeNode ;
    //计数器 用来清除setInterval
    var i=0;    
    /**
    前序遍历按钮
    **/
    function preTra(){
        preOrder(lis[0])
        timer = setInterval(pre,500)
    }
    /**
    中序遍历按钮
    **/
    function inTra(){
        inOrder(lis[0])
        timer = setInterval(pre,1000)
    }
    /**
    后序遍历按钮
    **/
    function postTra(){
        postOrder(lis[0])
        timer = setInterval(pre,1000)
    }
    /**
    前序遍历函数
    **/
    function preOrder(node){
        state.push(node)
        if(node){
          preOrder(node.children[0])
          preOrder(node.children[1])
        }
    }
    /**
    中序遍历函数
    **/
    function inOrder(node){
        if(node){
          inOrder(node.children[0])
          state.push(node)  
          inOrder(node.children[1])
        }
    }
    /**
    后序遍历函数
    **/
    function postOrder(node){
        if(node){
          postOrder(node.children[0])
          postOrder(node.children[1])
          state.push(node)          
        }
    }
    /**
    定时任务
    **/
    function pre(){
        if(i>0){
            changeNode.style.backgroundColor = '#ffffff'
        }
        for(var j=0;j<lis2.length;j++){
            if(lis2[j]==state[i]){
                changeNode = lis2[j]
                changeNode.style.backgroundColor = 'red'
            }
        }
        i++
        if(i==state.length){
            clearInterval(timer)
        }
    }
</script>    
</body>
</html>    